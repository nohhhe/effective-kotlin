아이템 51.성능이 중요한 부분에는 기본 자료형 배열을 사용하라 
=========================
코틀린은 기본 자료형을 선언할 수 없지만, 최적화를 위해서 내부적으로는 사용할 수 있다.
> 코틀린 컴파일러는 최적화를 통해 필요한 경우 JVM의 원시 타입으로 변환한다. 

#### 기본 자료형 특징 (아이템 45.불필요한 객체 생성을 피하라 참조)
* 가볍다. 일반적인 객체와 다르게 추가적으로 포함되는 것들이 없기 때문이다.
* 빠르다. 값에 접근할 때 추가 비용이 없다.

대규모의 데이터를 처리할 때 기본 자료형을 사용하면 상당히 큰 최적화가 이루어진다.
코틀린의 List나 Set 등의 컬렉션은 제네릭 타입이며 제네릭 타입에는 기본 자료형을 사용할 수 없으므로 래핑된 타입을 사용해야 한다.
하지만 성능이 중요한 코드라면 IntArray, LongArray 등의 기본 자료형을 활용하는 배열을 사용하는게 좋다.

IntArray와 List<Int> 1,000,000개 정수를 갖는 컬렉션일 경우 대략 5배 정도의 메모리 차이가 발생한다. 메모리 소비가 중요하다면 기본 자료형 배열을 사용하는 것이 좋다. 배열을 사용하는 경우 25%정도 성능적인 부분에서도 빠르다.
```kotlin
open class InlineFilterBenchmark {
    lateinit var list: List<Int>
    lateinit var intArray: IntArray
    
    @Setup
    fun init() {
        list = List(1_000_000) { it }
        intArray = IntArray(1_000_000) { it }
    }

    @Benchmark
    // 평균적으로 1,260,593 ns
    fun averageOnIntList(): Double {
        return list.average()
    }

    @Benchmark
    // 평균적으로 868,509 ns
    fun averageOnIntArray(): Double {
        return intArray.average()
    }
}
```

이처럼 기본 자료형을 포함하는 배열은 코드 성능이 중요한 부분을 최적화할 때 활용하면 좋다. 배열은 더 적은 메모리를 차지하고, 더 빠르게 동작한다.
다만 일반적인 경우에는 List를 사용하는 것이 좋다. List가 훨씬 더 기능이 다양하며, 더 많은 곳에 쉽게 사용될 수 있다. 성능이 중요한 경우에만 Array를 사용하자.

### 정리
일반적으로 Array보다 List와 Set을 사용하는 것이 좋다. 하지만 기본 자료형의 컬렉션을 많이 보유해야 하는 경우에는 성능을 높이고, 메모리 사용량을 줄일 수 있도록 Array를 사용하는 것이 좋다.