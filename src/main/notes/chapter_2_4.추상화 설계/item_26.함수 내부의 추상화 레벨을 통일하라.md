아이템 26. 함수 내부의 추상화 레벨을 통일하라
=========================
계층이 잘 분리되면 어떤 계층에서 작업할 때 그 아래의 계층은 이미 완성되어 있으므로, 전체를 이해할 필요없이 해당 계층만 생각하면 된다.

### 추상화 레벨
높은 레벨로 갈수록 물리 장치로부터 점점 멀어진다. 프로그래밍에선 일반적으로 높은 레벨일수록 프로세서로부터 멀어진다고 표현한다. 높은 레벨일수록 단순함을 얻지만 제어력을 잃는다.

### 추상화 레벨 통일
코드도 추상화를 계층처럼 만들어 사용할 수 있다. 이를 위한 기본 도구가 함수다.

컴퓨터 과학이 높은 레벨, 낮은 레벨을 확실하게 구분하고 있는 것처럼 함수도 높은 레벨, 낮은 레벨을 구분해서 써야 한다는 원칙이 있다. 
이를 추상화 레벨 통일(Single Level of Abstraction, SLA) 원칙이라 부른다.

```kotlin
class CoffeeMachine {
    fun makeCoffee() {
        // 많은 변수 선언
        // 복잡한 로직 처리
        // 낮은 수준의 최적화
    }
}

// 함수를 계층으로 나누어 사용
class CoffeeMachine {
    fun makeCoffee() {
        boilWater()
        brewCoffee()
        pourCoffee()
        pourMilk()
    }
    
    private fun boilWater() {}
    private fun brewCoffee() {}
    private fun pourCoffee() {}
    private fun pourMilk() {}
}
```

'함수는 작아야 하며 최소한의 책임만 가져야 한다'는 일반적인 규칙이다. 또한 어떤 함수가 다른 함수보다 좀 복잡하다면 일부분을 추출해서 추상화하는 게 좋다. 
모든 추상화 레벨에서 추상 요소(메서드 또는 클래스)를 조작한다. 추가로 이런 형태로 함수를 추출하면 재사용과 테스트가 쉬워진다. 또한 함수가 작아져 단위 테스트도 쉽다.

### 프로그램 아키텍처의 추상 레벨
추상화 계층이라는 개념은 함수보다 높은 레벨에서도 적용할 수 있다. 추상화를 구분하는 이유는 서브시스템의 세부사항을 숨김으로써 상호 운영성과 플랫폼 독립성을 얻기 위함이다. 이는 문제 중심으로 프로그래밍한다는 의미다.

이러한 개념은 모듈 시스템을 설계할 때도 중요하다. 모듈을 분리하면 계층 고유의 요소를 숨길 수 있다.

### 정리
추상화 계층을 만드는 것은 knowledge를 체계화하고, 서브시스템의 세부 사항을 숨김으로써 상호 운영성과 플랫폼 독립성을 얻는다.
함수, 클래스, 모듈 등의 다양한 방식을 통해서 추상화를 분리한다. 이때 각각의 레이어가 너무 커지는 것은 좋지 않다.
추상화 레벨은 구체적인 동작, 프로세서, 입출력과 가까울 수록 낮으 레벨이라 표현한다. 낮은 추상화 계층에서는 높은 계층에서 사용하는 요소(API)를 만든다.